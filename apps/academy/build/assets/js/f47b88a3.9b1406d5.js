"use strict";(self.webpackChunk_powerhousedao_academy=self.webpackChunk_powerhousedao_academy||[]).push([[2694],{2232:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/DocumentModelOperations-a7e873ca49a96fb3e5e447996c82934b.png"},7279:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>d,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"academy/GetStarted/DefineToDoListDocumentModel","title":"Write the document specification","description":"\ud83d\udce6 Reference Code: step-2-generate-todo-list-document-model","source":"@site/docs/academy/01-GetStarted/02-DefineToDoListDocumentModel.md","sourceDirName":"academy/01-GetStarted","slug":"/academy/GetStarted/DefineToDoListDocumentModel","permalink":"/academy/GetStarted/DefineToDoListDocumentModel","draft":false,"unlisted":false,"editUrl":"https://github.com/powerhouse-inc/powerhouse-docs/tree/dev/docs/academy/01-GetStarted/02-DefineToDoListDocumentModel.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"academySidebar","previous":{"title":"Create a new to-do list document","permalink":"/academy/GetStarted/CreateNewPowerhouseProject"},"next":{"title":"Implement the document model","permalink":"/academy/GetStarted/ImplementOperationReducers"}}');var i=n(5723),s=n(7474);const d={},r="Write the document specification",c={},a=[{value:"Compare your generated code",id:"compare-your-generated-code",level:3},{value:"See what was generated",id:"see-what-was-generated",level:3},{value:"Visual comparison with GitHub Desktop",id:"visual-comparison-with-github-desktop",level:3},{value:"TodoList document specification",id:"todolist-document-specification",level:2},{value:"Define the document model specification",id:"define-the-document-model-specification",level:2},{value:"The steps below show you how to do this:",id:"the-steps-below-show-you-how-to-do-this",level:3},{value:"Verify your document model generation",id:"verify-your-document-model-generation",level:2},{value:"Compare with reference",id:"compare-with-reference",level:3},{value:"Up next: reducers",id:"up-next-reducers",level:3}];function l(e){const t={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Details:o}=t;return o||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"write-the-document-specification",children:"Write the document specification"})}),"\n",(0,i.jsxs)(t.admonition,{title:"Tutorial Repository",type:"tip",children:[(0,i.jsxs)(t.p,{children:["\ud83d\udce6 ",(0,i.jsx)(t.strong,{children:"Reference Code"}),": ",(0,i.jsx)(t.a,{href:"https://github.com/powerhouse-inc/todo-tutorial/tree/step-2-generate-todo-list-document-model",children:"step-2-generate-todo-list-document-model"})]}),(0,i.jsx)(t.p,{children:"This tutorial step has a corresponding branch. After completing this step, your project will have a generated document model with:"}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Document model specification files (",(0,i.jsx)(t.code,{children:"todo-list.json"}),", ",(0,i.jsx)(t.code,{children:"schema.graphql"}),")"]}),"\n",(0,i.jsx)(t.li,{children:"Auto-generated TypeScript types and action creators"}),"\n",(0,i.jsx)(t.li,{children:"Reducer scaffolding ready for implementation"}),"\n"]})]}),"\n",(0,i.jsxs)(o,{children:[(0,i.jsx)("summary",{children:"\ud83d\udcd6 How to use this tutorial"}),(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Prerequisites"}),": Complete step 1 and set up the tutorial remote (see previous step)."]}),(0,i.jsx)(t.h3,{id:"compare-your-generated-code",children:"Compare your generated code"}),(0,i.jsxs)(t.p,{children:["After running ",(0,i.jsx)(t.code,{children:"ph generate TodoList.phdm.zip"}),", compare with the reference:"]}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"# Compare all generated files with step-2\ngit diff tutorial/step-2-generate-todo-list-document-model\n\n# Compare specific directory\ngit diff tutorial/step-2-generate-todo-list-document-model -- document-models/todo-list/\n"})}),(0,i.jsx)(t.h3,{id:"see-what-was-generated",children:"See what was generated"}),(0,i.jsx)(t.p,{children:"View the complete step-2 reference code:"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"# List files in the tutorial's step-2\ngit ls-tree -r --name-only tutorial/step-2-generate-todo-list-document-model document-models/\n\n# View a specific file from step-2\ngit show tutorial/step-2-generate-todo-list-document-model:document-models/todo-list/schema.graphql\n"})}),(0,i.jsx)(t.h3,{id:"visual-comparison-with-github-desktop",children:"Visual comparison with GitHub Desktop"}),(0,i.jsx)(t.p,{children:"After making a commit, use GitHub Desktop for visual diff:"}),(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Branch"})," menu \u2192 ",(0,i.jsx)(t.strong,{children:'"Compare to Branch..."'})]}),"\n",(0,i.jsxs)(t.li,{children:["Select ",(0,i.jsx)(t.code,{children:"tutorial/step-2-generate-todo-list-document-model"})]}),"\n",(0,i.jsx)(t.li,{children:"Review all file differences in the visual interface"}),"\n"]}),(0,i.jsx)(t.p,{children:"See step 1 for detailed GitHub Desktop instructions."})]}),"\n",(0,i.jsxs)(t.p,{children:["In this tutorial, you will learn how to define the specifications for a ",(0,i.jsx)(t.strong,{children:"TodoList"})," document model within the Connect application using its GraphQL schema, and then export the resulting document model specification document for your Powerhouse project.\nIf you don't have a document specification file created yet, have a look at the previous step of this tutorial to create a new document specification."]}),"\n",(0,i.jsx)(t.p,{children:"Before you start, make sure you have the Connect application running locally with the command:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"ph connect\n"})}),"\n",(0,i.jsx)(t.p,{children:"The Connect application will start and you will see the following output:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"  \u279c  Local:   http://localhost:3000/\n  \u279c  Network: http://192.168.5.110:3000/\n  \u279c  press h + enter to show help\n"})}),"\n",(0,i.jsx)(t.h2,{id:"todolist-document-specification",children:"TodoList document specification"}),"\n",(0,i.jsxs)(t.p,{children:["Make sure you have named your document model ",(0,i.jsx)(t.code,{children:"TodoList"})," (PascalCase, no spaces or hyphens).",(0,i.jsx)(t.br,{}),"\n",(0,i.jsx)(t.strong,{children:"Pay close attention to capitalization, as it influences our code generation."})]}),"\n",(0,i.jsxs)(t.p,{children:["We'll continue with this project to teach you how to create a document model specification and later an editor for your document model. We use the ",(0,i.jsx)(t.strong,{children:"GraphQL Schema Definition Language"})," (SDL) to define the schema for the document model.",(0,i.jsx)(t.br,{}),"\n","Below, you can see the SDL for the ",(0,i.jsx)(t.code,{children:"TodoList"})," document model."]}),"\n",(0,i.jsx)(t.admonition,{type:"info",children:(0,i.jsxs)(t.p,{children:["This schema defines the ",(0,i.jsx)(t.strong,{children:"data structure"})," of the document model and the types involved in its operations, which are detailed further as input types.\nDocuments in Powerhouse leverage ",(0,i.jsx)(t.strong,{children:"event sourcing principles"}),", where every state transition is represented by an operation. GraphQL input types describe operations, ensuring that user intents are captured effectively. These operations detail the parameters needed for state transitions. The use of GraphQL aligns these transitions with explicit, validated, and reproducible commands."]})}),"\n",(0,i.jsxs)(o,{children:[(0,i.jsx)("summary",{children:"State schema of our simplified TodoList"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-graphql",children:"# The state of our TodoList\ntype TodoListState {\n  items: [TodoItem!]!\n}\n\n# A single to-do item\ntype TodoItem {\n  id: OID!\n  text: String!\n  checked: Boolean!\n}\n"})})]}),"\n",(0,i.jsxs)(o,{children:[(0,i.jsx)("summary",{children:"Operations schema of our simplified TodoList"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-graphql",children:"# Defines a GraphQL input type for adding a new to-do item\ninput AddTodoItemInput {\n  text: String!\n}\n\n# Defines a GraphQL input type for updating a to-do item\ninput UpdateTodoItemInput {\n  id: OID!\n  text: String\n  checked: Boolean\n}\n\n# Defines a GraphQL input type for deleting a to-do item\ninput DeleteTodoItemInput {\n  id: OID!\n}\n"})})]}),"\n",(0,i.jsx)(t.h2,{id:"define-the-document-model-specification",children:"Define the document model specification"}),"\n",(0,i.jsx)(t.p,{children:"To be able to define the document model, you need to open the document model editor in Connect."}),"\n",(0,i.jsx)(t.h3,{id:"the-steps-below-show-you-how-to-do-this",children:"The steps below show you how to do this:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["In the Connect application, click on ",(0,i.jsx)(t.strong,{children:"'document model'"})," to open the document model specification editor."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Name your document model ",(0,i.jsx)(t.code,{children:"TodoList"})," (PascalCase, no spaces or hyphens) in the Connect application. ",(0,i.jsx)(t.strong,{children:"Pay close attention to capitalization, as it influences code generation."})]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"You'll be presented with a form to fill in metadata about the document model. Fill in the details in the respective fields."}),"\n",(0,i.jsxs)(t.p,{children:["In the ",(0,i.jsx)(t.strong,{children:"Document Type"})," field, type ",(0,i.jsx)(t.code,{children:"powerhouse/todo-list"})," (lowercase with hyphen). This defines the new type of document that will be created with this document model specification."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"TodoList Document Model Form Metadata",src:n(8173).A+"",width:"2588",height:"1178"})}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["In the code editor, you can see the SDL for the document model. Replace the existing SDL template with the SDL defined in the ",(0,i.jsx)(t.a,{href:"#state-schema",children:"State Schema"})," section. Only copy and paste the types, leaving the inputs for the next step. You can, however, already press the 'Sync with schema' button to set the initial state of your document model specification based on your Schema Definition Language."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Below the editor, find the input field ",(0,i.jsx)(t.code,{children:"Add module"}),". You'll use this to create and name a module for organizing your input operations. In this case, we will name the module ",(0,i.jsx)(t.code,{children:"todos"}),". Press enter."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Now there is a new field, called ",(0,i.jsx)(t.code,{children:"Add operation"}),". Here you will have to add each input operation to the module, one by one."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Inside the ",(0,i.jsx)(t.code,{children:"Add operation"})," field, type ",(0,i.jsx)(t.code,{children:"ADD_TODO_ITEM"})," and press enter. A small editor will appear underneath it, with an empty input type that you have to fill. Copy the first input type from the ",(0,i.jsx)(t.a,{href:"#operations-schema",children:"Operations Schema"})," section and paste it in the editor. The editor should look like this:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-graphql",children:"input AddTodoItemInput {\n    text: String!\n}\n"})}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Repeat the process from step 7 for the other input operations: ",(0,i.jsx)(t.code,{children:"UPDATE_TODO_ITEM"})," and ",(0,i.jsx)(t.code,{children:"DELETE_TODO_ITEM"}),". You may have noticed that you only need to add the name of the operation (e.g., ",(0,i.jsx)(t.code,{children:"UPDATE_TODO_ITEM"}),", ",(0,i.jsx)(t.code,{children:"DELETE_TODO_ITEM"}),") without the ",(0,i.jsx)(t.code,{children:"Input"})," suffix. It will then be generated once you press enter."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Once you have added all the input operations, click the ",(0,i.jsx)(t.code,{children:"Export"})," button at the top right of the editor to save the document model specification document to your local machine. Ideally, you should save your file in the root of your Powerhouse project on your machine."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Check below screenshot for the complete implementation:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"ToDoList Document Model",src:n(2232).A+"",width:"2588",height:"1732"})}),"\n",(0,i.jsx)(t.h2,{id:"verify-your-document-model-generation",children:"Verify your document model generation"}),"\n",(0,i.jsxs)(t.p,{children:["After running ",(0,i.jsx)(t.code,{children:"pnpm generate TodoList.phd"}),", your project should have the following structure in ",(0,i.jsx)(t.code,{children:"document-models/todo-list/"}),":"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"document-models/todo-list/\n\u251c\u2500\u2500 gen/                          # Auto-generated code (don't edit)\n\u2502   \u251c\u2500\u2500 actions.ts\n\u2502   \u251c\u2500\u2500 creators.ts              # Action creator functions\n\u2502   \u251c\u2500\u2500 types.ts                 # TypeScript type definitions\n\u2502   \u251c\u2500\u2500 reducer.ts\n\u2502   \u2514\u2500\u2500 todos/\n\u2502       \u2514\u2500\u2500 operations.ts        # Operation type definitions\n\u251c\u2500\u2500 src/                          # Your custom implementation\n\u2502   \u251c\u2500\u2500 reducers/\n\u2502   \u2502   \u2514\u2500\u2500 todos.ts            # Reducer functions (to implement next)\n\u2502   \u2514\u2500\u2500 tests/\n\u2502       \u2514\u2500\u2500 todos.test.ts        # Test file scaffolding\n\u251c\u2500\u2500 todo-list.json               # Document model specification\n\u2514\u2500\u2500 schema.graphql               # GraphQL schema\n"})}),"\n",(0,i.jsx)(t.h3,{id:"compare-with-reference",children:"Compare with reference"}),"\n",(0,i.jsx)(t.p,{children:"Verify your generated files match the expected structure:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"# Compare your generated files with step-2\ngit diff tutorial/step-2-generate-todo-list-document-model -- document-models/todo-list/\n\n# List what was generated in the reference\ngit ls-tree -r --name-only tutorial/step-2-generate-todo-list-document-model document-models/todo-list/\n"})}),"\n",(0,i.jsx)(t.h3,{id:"up-next-reducers",children:"Up next: reducers"}),"\n",(0,i.jsxs)(t.p,{children:["Up next, you'll learn how to implement the runtime logic and components that will use the ",(0,i.jsx)(t.code,{children:"TodoList"})," document model specification you've just created and exported."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},7474:(e,t,n)=>{n.d(t,{R:()=>d,x:()=>r});var o=n(2155);const i={},s=o.createContext(i);function d(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),o.createElement(s.Provider,{value:t},e.children)}},8173:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/DocumentModelHeader-d7df3b08ab717409665d637c91031b54.png"}}]);