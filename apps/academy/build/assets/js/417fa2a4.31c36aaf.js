"use strict";(self.webpackChunk_powerhousedao_academy=self.webpackChunk_powerhousedao_academy||[]).push([[4679],{2421:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/committer-address-popup-b2181ce42d81ca9dfab3666c078569fb.png"},3126:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/revision-history-list-edccd88a3318917c22cd6a3e7a6fe621.png"},3398:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/revision-hash-popup-27b3535f355a9739022299900d80e12d.png"},4749:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"academy/MasteryTrack/BuildingUserExperiences/DocumentTools/OperationHistory","title":"Operations history","description":"What is a document model?","source":"@site/docs/academy/02-MasteryTrack/03-BuildingUserExperiences/06-DocumentTools/01-OperationHistory.md","sourceDirName":"academy/02-MasteryTrack/03-BuildingUserExperiences/06-DocumentTools","slug":"/academy/MasteryTrack/BuildingUserExperiences/DocumentTools/OperationHistory","permalink":"/academy/MasteryTrack/BuildingUserExperiences/DocumentTools/OperationHistory","draft":false,"unlisted":false,"editUrl":"https://github.com/powerhouse-inc/powerhouse-docs/tree/dev/docs/academy/02-MasteryTrack/03-BuildingUserExperiences/06-DocumentTools/01-OperationHistory.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"academySidebar","previous":{"title":"Document Toolbar","permalink":"/academy/MasteryTrack/BuildingUserExperiences/DocumentTools/DocumentToolbar"},"next":{"title":"Authorization","permalink":"/category/authorization"}}');var t=i(5723),r=i(7474);const o={},a="Operations history",d={},c=[{value:"What is a document model?",id:"what-is-a-document-model",level:2},{value:"What is an operations history?",id:"what-is-an-operations-history",level:2},{value:"Why use an operations history?",id:"why-use-an-operations-history",level:2},{value:"Example: Invoice document",id:"example-invoice-document",level:2},{value:"Visualizing the operations history",id:"visualizing-the-operations-history",level:2},{value:"Revision list and details",id:"revision-list-and-details",level:3},{value:"Viewing revision hashes and event IDs",id:"viewing-revision-hashes-and-event-ids",level:3},{value:"Signature verification",id:"signature-verification",level:3},{value:"Viewing committer addresses",id:"viewing-committer-addresses",level:3},{value:"Replay, branch, and merge (under development)",id:"replay-branch-and-merge-under-development",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"operations-history",children:"Operations history"})}),"\n",(0,t.jsx)(n.h2,{id:"what-is-a-document-model",children:"What is a document model?"}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.strong,{children:"document model"})," in Powerhouse is the core unit for managing business data. Each document (such as an invoice, contributor agreement, or scope of work) is created from a specific document model, which defines:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"State schema:"})," What data the document contains"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Operations:"})," What actions can modify that document"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"what-is-an-operations-history",children:"What is an operations history?"}),"\n",(0,t.jsxs)(n.p,{children:["Every time a user edits a document, they do so by submitting a document operation or a 'command' in CQRS (e.g., ",(0,t.jsx)(n.code,{children:"ADD_LINE_ITEM"}),", ",(0,t.jsx)(n.code,{children:"UPDATE_RECIPIENT"}),"). These operations are:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Appended"})," to the document's history"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Immutable"})," (you never overwrite; you always append)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Replayable"})," \u2014 the current document state is the result of applying all past operations in sequence"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["This design is based on ",(0,t.jsx)(n.strong,{children:"event sourcing"})," principles."]}),"\n",(0,t.jsx)(n.h2,{id:"why-use-an-operations-history",children:"Why use an operations history?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Auditability:"})," Inspect every change ever made to a document."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Transparency:"})," Contributors see what others have done."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Versioning:"})," Revert to any prior state or resolve conflicts using branching and merging."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Interoperability:"})," Operations are just data\u2014they can be signed, stored on-chain, or synchronized across systems."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"example-invoice-document",children:"Example: Invoice document"}),"\n",(0,t.jsxs)(n.p,{children:["Suppose you're editing a ",(0,t.jsx)(n.code,{children:"powerhouse/invoice"})," document. Its operations history might look like this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:'SET_RECIPIENT(name: "Acme Corp")\nADD_LINE_ITEM(description: "Design Work", unitCost: $500)\nUPDATE_DUE_DATE(date: "2025-06-01")\n'})}),"\n",(0,t.jsx)(n.p,{children:"The document's state at any time is the result of running those operations in order."}),"\n",(0,t.jsx)(n.h2,{id:"visualizing-the-operations-history",children:"Visualizing the operations history"}),"\n",(0,t.jsx)(n.h3,{id:"revision-list-and-details",children:"Revision list and details"}),"\n",(0,t.jsx)(n.p,{children:"In Connect the Powerhouse UI displays a chronologic list of all applied modifications to the document, each with a unique event ID, state hash, and commit message. You can inspect each revision for signatures and errors."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Revision History List",src:i(3126).A+"",width:"2584",height:"622"})}),"\n",(0,t.jsx)(n.h3,{id:"viewing-revision-hashes-and-event-ids",children:"Viewing revision hashes and event IDs"}),"\n",(0,t.jsx)(n.p,{children:"Hovering over a revision reveals its event ID and state hash, providing traceability for every change."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Revision Hash Popup",src:i(3398).A+"",width:"2584",height:"1174"})}),"\n",(0,t.jsx)(n.h3,{id:"signature-verification",children:"Signature verification"}),"\n",(0,t.jsxs)(n.p,{children:["Clicking the signature badge shows signature details, including signer address, hash, and verification status. This ensures every operation is cryptographically auditable.\nRead more about how we are using ",(0,t.jsx)(n.a,{href:"/academy/MasteryTrack/BuildingUserExperiences/Authorization/RenownAuthenticationFlow",children:"Renown"})," for authentication & verification of signer data."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Signature Details Popup",src:i(5661).A+"",width:"2584",height:"1174"})}),"\n",(0,t.jsx)(n.h3,{id:"viewing-committer-addresses",children:"Viewing committer addresses"}),"\n",(0,t.jsx)(n.p,{children:"You can also view the committer's address for each revision, supporting full transparency and accountability."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Committer Address Popup",src:i(2421).A+"",width:"2584",height:"1174"})}),"\n",(0,t.jsx)(n.h2,{id:"replay-branch-and-merge-under-development",children:"Replay, branch, and merge (under development)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Replay:"})," When you load a document, the system replays all operations to build its state."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Branch:"})," Create a parallel version of the document to test changes or handle conflicts."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Merge:"})," Combine branches intelligently based on operations, not just raw field values."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},5661:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/signature-details-popup-42a1dc4e36ef1cd1768d2d6780c6f581.png"},7474:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var s=i(2155);const t={},r=s.createContext(t);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);