"use strict";(self.webpackChunk_powerhousedao_academy=self.webpackChunk_powerhousedao_academy||[]).push([[9125],{5161:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"academy/MasteryTrack/WorkWithData/Analytics Engine/typescript/browser","title":"Browser store","description":"The BrowserAnalyticsStore is an IAnalyticsStore implementation that sits on top of MemoryAnalyticsStore but adds an IndexedDB plugin for persistence.","source":"@site/docs/academy/02-MasteryTrack/04-WorkWithData/06-Analytics Engine/typescript/browser.md","sourceDirName":"academy/02-MasteryTrack/04-WorkWithData/06-Analytics Engine/typescript","slug":"/academy/MasteryTrack/WorkWithData/Analytics Engine/typescript/browser","permalink":"/academy/MasteryTrack/WorkWithData/Analytics Engine/typescript/browser","draft":false,"unlisted":false,"editUrl":"https://github.com/powerhouse-inc/powerhouse-docs/tree/dev/docs/academy/02-MasteryTrack/04-WorkWithData/06-Analytics Engine/typescript/browser.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"academySidebar","previous":{"title":"Memory store","permalink":"/academy/MasteryTrack/WorkWithData/Analytics Engine/typescript/memory"},"next":{"title":"Postgres store","permalink":"/academy/MasteryTrack/WorkWithData/Analytics Engine/typescript/pg"}}');var r=n(5723),a=n(7474);const i={sidebar_position:2},o="Browser store",c={},l=[{value:"Construction",id:"construction",level:2},{value:"Initialization",id:"initialization",level:2},{value:"Persistence",id:"persistence",level:2}];function d(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"browser-store",children:"Browser store"})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"BrowserAnalyticsStore"})," is an ",(0,r.jsx)(t.code,{children:"IAnalyticsStore"})," implementation that sits on top of ",(0,r.jsx)(t.a,{href:"#memory",children:(0,r.jsx)(t.code,{children:"MemoryAnalyticsStore"})})," but adds an ",(0,r.jsx)(t.code,{children:"IndexedDB"})," plugin for persistence."]}),"\n",(0,r.jsx)("aside",{class:"notice",children:(0,r.jsxs)(t.p,{children:["See the ",(0,r.jsx)("a",{href:"#compatibility",children:"Compatibility"})," section for details on which stores are intended to be used in different execution environments."]})}),"\n",(0,r.jsx)(t.h2,{id:"construction",children:"Construction"}),"\n",(0,r.jsxs)(t.p,{children:["A default implementation of the ",(0,r.jsx)(t.code,{children:"BrowserAnalyticsStore"})," may be created with no arguments, or options are provided for specialized needs."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'// creates a database named "analytics"\nconst store = new BrowserAnalyticsStore();\n'})}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"Create with a specific database name."}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'const store = new BrowserAnalyticsStore({ databaseName: "analytics" });\n'})}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"It may also be created with optional contructor arguments that may be helpful for debugging or metrics collection."}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'const store = new BrowserAnalyticsStore({\n  databaseName: "analytics",\n\n  queryLogger: defaultQueryLogger("browser"),\n  resultsLogger: defaultResultsLogger("browser"),\n  profiler: new PassthroughAnalyticsProfiler(),\n});\n'})}),"\n",(0,r.jsxs)(t.p,{children:["For more details on these optional constructor parameters, see the ",(0,r.jsx)(t.a,{href:"#utilities",children:"Utilities"})," section."]}),"\n",(0,r.jsxs)(t.p,{children:["Since the constructor options argument extends the ",(0,r.jsx)(t.code,{children:"MemoryAnalyticsStore"})," options argument, see the ",(0,r.jsx)(t.a,{href:"#memory",children:(0,r.jsx)(t.code,{children:"MemoryAnalyticsStore"})})," documentation for further details on other optional parameters."]}),"\n",(0,r.jsx)(t.h2,{id:"initialization",children:"Initialization"}),"\n",(0,r.jsxs)(t.p,{children:["Similar to the ",(0,r.jsx)(t.a,{href:"#memory",children:(0,r.jsx)(t.code,{children:"MemoryAnalyticsStore"})}),", this implementation requires an asynchronous initialization step."]}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsxs)(t.p,{children:["Note that this method is not available on the ",(0,r.jsx)(t.code,{children:"IAnalyticsStore"})," interface, but only on the concrete type."]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"// create the store\nconst store = new BrowserAnalyticsStore();\n\n// initialize it\nawait store.init();\n"})}),"\n",(0,r.jsx)(t.h2,{id:"persistence",children:"Persistence"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"databaseName"}),' constructor argument namespaces the database. This allows users to create multiple stores, if needed, which will not conflict with each other. You can use your browser\'s developer tools to see these databases, usually through the "Storage" tab.']}),"\n",(0,r.jsx)("aside",{class:"notice",children:(0,r.jsx)(t.p,{children:"While manipulating the data manually is not recommended, this allows you to easily delete and recreate databases if needed."})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"dev-tools",src:n(5794).A+"",width:"962",height:"280"})}),"\n",(0,r.jsxs)(t.p,{children:["The store interface is intended to be immutable, meaning that it does not provide a general method of wiping a DB. However, an IDB database may be deleted via the standard ",(0,r.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API",children:"IDB API"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'// creates the database\nconst store = new BrowserAnalyticsStore({ databaseName: "my-analytics" });\nawait store.init();\n\n// use the browser API to delete the database\nwindow.indexedDB.deleteDatabase("my-analytics");\n'})})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},5794:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/indexeddb-580ea60e43e4beb20a3c79838e005d75.png"},7474:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var s=n(2155);const r={},a=s.createContext(r);function i(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);