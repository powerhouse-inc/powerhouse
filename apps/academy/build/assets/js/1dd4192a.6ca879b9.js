"use strict";(self.webpackChunk_powerhousedao_academy=self.webpackChunk_powerhousedao_academy||[]).push([[7965],{7474:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>d});var i=t(2155);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}},9414:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"academy/MasteryTrack/DocumentModelCreation/WhatIsADocumentModel","title":"What is a document model?","description":"This chapter on Document Model Creation will help you with an in-depth practical understanding while building an advanced to-do list document model.","source":"@site/docs/academy/02-MasteryTrack/02-DocumentModelCreation/01-WhatIsADocumentModel.md","sourceDirName":"academy/02-MasteryTrack/02-DocumentModelCreation","slug":"/academy/MasteryTrack/DocumentModelCreation/WhatIsADocumentModel","permalink":"/academy/MasteryTrack/DocumentModelCreation/WhatIsADocumentModel","draft":false,"unlisted":false,"editUrl":"https://github.com/powerhouse-inc/powerhouse-docs/tree/dev/docs/academy/02-MasteryTrack/02-DocumentModelCreation/01-WhatIsADocumentModel.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"academySidebar","previous":{"title":"Document model creation","permalink":"/category/document-model-creation"},"next":{"title":"Specify the state schema","permalink":"/academy/MasteryTrack/DocumentModelCreation/SpecifyTheStateSchema"}}');var s=t(5723),o=t(7474);const r={},d="What is a document model?",a={},c=[{value:"<strong>How does a document model function?</strong>",id:"how-does-a-document-model-function",level:3},{value:"<strong>Structure and composition</strong>",id:"structure-and-composition",level:4},{value:"<strong>1. Structure of a document model</strong>",id:"1-structure-of-a-document-model",level:2},{value:"<strong>1.1 State schema</strong>",id:"11-state-schema",level:3},{value:"<strong>State schema features:</strong>",id:"state-schema-features",level:3},{value:"<strong>1.2 Document operations</strong>",id:"12-document-operations",level:3},{value:"<strong>1.3 Event history (append-only log)</strong>",id:"13-event-history-append-only-log",level:3},{value:"<strong>Example event log for an invoice document:</strong>",id:"example-event-log-for-an-invoice-document",level:4},{value:"<strong>Event history benefits:</strong>",id:"event-history-benefits",level:3},{value:"<strong>2. How document models work technically</strong>",id:"2-how-document-models-work-technically",level:2},{value:"<strong>2.1 Document creation</strong>",id:"21-document-creation",level:3},{value:"<strong>2.2 Document modification</strong>",id:"22-document-modification",level:3},{value:"<strong>2.3 Querying document models</strong>",id:"23-querying-document-models",level:3},{value:"<strong>What do document models unlock?</strong>",id:"what-do-document-models-unlock",level:3},{value:"Up next: How to build a document model",id:"up-next-how-to-build-a-document-model",level:3}];function l(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"what-is-a-document-model",children:"What is a document model?"})}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["This chapter on ",(0,s.jsx)(n.strong,{children:"Document Model Creation"})," will help you with an in-depth practical understanding while building an ",(0,s.jsx)(n.strong,{children:"advanced to-do list"})," document model."]}),(0,s.jsxs)(n.p,{children:["If you have completed the ",(0,s.jsx)(n.a,{href:"/academy/GetStarted/CreateNewPowerhouseProject",children:"Get Started"})," tutorial (which includes creating a simple to-do list document model), you will revisit familiar topics and can enhance your existing document model with the advanced features covered in this Mastery Track, such as statistics tracking."]}),(0,s.jsx)(n.p,{children:"Although not required, completing the Get Started tutorial first is highly recommended as it provides a hands-on foundation for the concepts explored in depth here."})]}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsx)(n.mdxAdmonitionTitle,{children:(0,s.jsx)(n.strong,{children:"Definition: What is a Document Model?"})}),(0,s.jsx)(n.p,{children:"A Document Model is a programmable document structure that defines how data is stored, changed, and interpreted in a decentralized system. It acts like a living blueprint\u2014capturing state, tracking changes, and enabling interaction through defined operations."}),(0,s.jsxs)(n.p,{children:["For instance, an invoice document model might define fields like ",(0,s.jsx)(n.em,{children:"issuer"}),", ",(0,s.jsx)(n.em,{children:"lineItems"}),", and ",(0,s.jsx)(n.em,{children:"status"}),", with operations such as ",(0,s.jsx)(n.em,{children:"AddLineItem"})," and ",(0,s.jsx)(n.em,{children:"MarkAsPaid"}),"."]})]}),"\n",(0,s.jsx)(n.p,{children:"A Document Model can be understood as:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A structured software framework that represents and ",(0,s.jsx)(n.strong,{children:"manages business logic"})," within a digital environment."]}),"\n",(0,s.jsxs)(n.li,{children:["A sophisticated template that ",(0,s.jsx)(n.strong,{children:"encapsulates the essential aspects of a digital process or a set of data"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["A blueprints that define how data is ",(0,s.jsx)(n.strong,{children:"captured, manipulated, and visualised"})," within a system."]}),"\n",(0,s.jsxs)(n.li,{children:["A ",(0,s.jsx)(n.strong,{children:"standardized way to store, modify, and query data"})," in scalable, decentralized applications."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"how-does-a-document-model-function",children:(0,s.jsx)(n.strong,{children:"How does a document model function?"})}),"\n",(0,s.jsx)(n.h4,{id:"structure-and-composition",children:(0,s.jsx)(n.strong,{children:"Structure and composition"})}),"\n",(0,s.jsx)(n.p,{children:"Each document model consists of three key components:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"State Schema"})," \u2013 Defines the structure of the document."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Document Operations"})," \u2013 Defines how the document can be modified."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Event History"})," \u2013 Maintains an append-only log of changes."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Document models leverage ",(0,s.jsx)(n.strong,{children:"event sourcing, CQRS (Command Query Responsibility Segregation), and an append-only architecture"})," to ensure immutability, auditability, and scalability."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"1-structure-of-a-document-model",children:(0,s.jsx)(n.strong,{children:"1. Structure of a document model"})}),"\n",(0,s.jsx)(n.p,{children:"A document model consists of the following key components:"}),"\n",(0,s.jsx)(n.h3,{id:"11-state-schema",children:(0,s.jsx)(n.strong,{children:"1.1 State schema"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"state schema"})," defines the structure of the document, including its fields and data types. It serves as a blueprint for how data is stored and validated."]}),"\n",(0,s.jsxs)(n.p,{children:["Example of a ",(0,s.jsx)(n.strong,{children:"GraphQL-like state schema"})," for an invoice document:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'type InvoiceState {\n  id: OID! # Unique identifier for the invoice\n  issuer: OID! # Reference to the issuing entity\n  recipient: OID! # Reference to the recipient entity\n  status: String # (value: "DRAFT") # Invoice status\n  dueDate: DateTime # Payment due date\n  lineItems: [LineItem!]! # List of line items\n  totalAmount: Currency # Computed field for total invoice value\n}\n\ntype LineItem {\n  id: OID!\n  description: String\n  quantity: Int\n  unitPrice: Currency\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"state-schema-features",children:(0,s.jsx)(n.strong,{children:"State schema features:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Uses ",(0,s.jsx)(n.strong,{children:"GraphQL-like definitions"})," for a ",(0,s.jsx)(n.strong,{children:"clear, structured schema"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Supports ",(0,s.jsx)(n.strong,{children:"custom scalar types"})," like ",(0,s.jsx)(n.code,{children:"OID"}),", ",(0,s.jsx)(n.code,{children:"Currency"}),", and ",(0,s.jsx)(n.code,{children:"DateTime"}),". Or other Web3 specific scalars"]}),"\n",(0,s.jsxs)(n.li,{children:["Defines ",(0,s.jsx)(n.strong,{children:"relationships"})," using object references (",(0,s.jsx)(n.code,{children:"OID!"}),")."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The state schema acts as a ",(0,s.jsx)(n.strong,{children:"template"})," for document instances. Every new invoice created will follow this structure."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"12-document-operations",children:(0,s.jsx)(n.strong,{children:"1.2 Document operations"})}),"\n",(0,s.jsxs)(n.p,{children:["Document models are ",(0,s.jsx)(n.strong,{children:"append-only"}),", meaning changes are not made directly to the document state. Instead, ",(0,s.jsx)(n.strong,{children:"document operations"})," define valid state transitions."]}),"\n",(0,s.jsx)(n.p,{children:"Example operations for modifying an invoice:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:"input AddLineItemInput {\n  invoiceId: OID!\n  description: String\n  quantity: Int\n  unitPrice: Currency\n}\n\ninput UpdateRecipientInput {\n  invoiceId: OID!\n  newRecipient: OID!\n}\n\ninput MarkAsPaidInput {\n  invoiceId: OID!\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Each operation ",(0,s.jsx)(n.strong,{children:"modifies the document state"})," without altering past data.",(0,s.jsx)(n.br,{}),"\n","Instead, a new event is appended to the document history."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"13-event-history-append-only-log",children:(0,s.jsx)(n.strong,{children:"1.3 Event history (append-only log)"})}),"\n",(0,s.jsxs)(n.p,{children:["Every operation applied to a document is ",(0,s.jsx)(n.strong,{children:"stored as an event"})," in an append-only log."]}),"\n",(0,s.jsx)(n.h4,{id:"example-event-log-for-an-invoice-document",children:(0,s.jsx)(n.strong,{children:"Example event log for an invoice document:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'[\n  { "timestamp": 1700000001, "operation": "CREATE_INVOICE", "data": { "id": "inv-001", "issuer": "company-123", "recipient": "client-456" } },\n  { "timestamp": 1700000100, "operation": "ADD_LINE_ITEM", "data": { "description": "Software Development", "quantity": 10, "unitPrice": 100 } },\n  { "timestamp": 1700000200, "operation": "MARK_AS_PAID", "data": {}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"event-history-benefits",children:(0,s.jsx)(n.strong,{children:"Event history benefits:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Provides a ",(0,s.jsx)(n.strong,{children:"transparent audit trail"})," of changes."]}),"\n",(0,s.jsxs)(n.li,{children:["Enables ",(0,s.jsx)(n.strong,{children:"time travel debugging"})," by reconstructing past states."]}),"\n",(0,s.jsxs)(n.li,{children:["Supports ",(0,s.jsx)(n.strong,{children:"event sourcing"}),", allowing developers to ",(0,s.jsx)(n.strong,{children:"replay events"})," to restore state."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-how-document-models-work-technically",children:(0,s.jsx)(n.strong,{children:"2. How document models work technically"})}),"\n",(0,s.jsxs)(n.p,{children:["Document models in Powerhouse rely on ",(0,s.jsx)(n.strong,{children:"event-driven architecture, event sourcing, and CQRS principles"}),". Here's a step-by-step breakdown:"]}),"\n",(0,s.jsx)(n.h3,{id:"21-document-creation",children:(0,s.jsx)(n.strong,{children:"2.1 Document creation"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["A user (or system) ",(0,s.jsx)(n.strong,{children:"submits an operation"})," to create a new document."]}),"\n",(0,s.jsxs)(n.li,{children:["The document model ",(0,s.jsx)(n.strong,{children:"validates"})," the input data against the state schema."]}),"\n",(0,s.jsxs)(n.li,{children:["The system ",(0,s.jsx)(n.strong,{children:"appends the operation"})," as an event in the document history."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.strong,{children:"initial state is computed"})," by applying the recorded events."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "operation": "CREATE_INVOICE",\n  "data": {\n    "id": "inv-001",\n    "issuer": "company-123",\n    "recipient": "client-456"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"22-document-modification",children:(0,s.jsx)(n.strong,{children:"2.2 Document modification"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["A user submits an ",(0,s.jsx)(n.strong,{children:"operation"})," (e.g., ",(0,s.jsx)(n.code,{children:"ADD_LINE_ITEM"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.strong,{children:"event is appended"})," to the document history."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.strong,{children:"state transition logic updates the computed state"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"The UI re-renders the updated document."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example:"}),"\nAdding a line item:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "operation": "ADD_LINE_ITEM",\n  "data": {\n    "description": "Software Development",\n    "quantity": 10,\n    "unitPrice": 100\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Since changes are ",(0,s.jsx)(n.strong,{children:"not applied directly"}),", this model is ",(0,s.jsx)(n.strong,{children:"highly scalable and auditable"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"23-querying-document-models",children:(0,s.jsx)(n.strong,{children:"2.3 Querying document models"})}),"\n",(0,s.jsxs)(n.p,{children:["Powerhouse uses ",(0,s.jsx)(n.strong,{children:"GraphQL queries"})," to fetch document states efficiently. Because documents store structured data, developers can instantly query:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-graphql",children:'query {\n  invoice(id: "inv-001") {\n    issuer\n    recipient\n    status\n    lineItems {\n      description\n      quantity\n      unitPrice\n    }\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["This removes the need for ",(0,s.jsx)(n.strong,{children:"complex database joins"})," and allows for ",(0,s.jsx)(n.strong,{children:"fast, structured access to data"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"what-do-document-models-unlock",children:(0,s.jsx)(n.strong,{children:"What do document models unlock?"})}),"\n",(0,s.jsx)(n.p,{children:"Document Models offer a range of features that can be leveraged to create sophisticated, automated, and data-driven solutions:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Automation"}),": Automate workflows using consistent, structured document logic."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Auditability"}),": Maintain a full history of changes for compliance and transparency."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"API Integration"}),": Seamlessly connect with Switchboard or external APIs for data exchange."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Data Analysis"}),": Enable real-time and historical insights through structured read models."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Version Control"}),": Track and compare document states over time, similar to Git."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Collaboration"}),": Empower decentralized teams to build, modify, and share documents asynchronously."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Extensibility"}),": Add new fields, operations, and integrations over time without rewriting logic."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Document Models are a powerful primitive within the Powerhouse vision, offering a flexible, structured, and efficient way to manage business logic and data."}),"\n",(0,s.jsx)(n.h3,{id:"up-next-how-to-build-a-document-model",children:"Up next: How to build a document model"}),"\n",(0,s.jsx)(n.p,{children:"In the next chapters, we'll teach you how to build a To-do List document model while explaining all of the theory that is involved."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);