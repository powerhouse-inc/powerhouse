"use strict";(self.webpackChunk_powerhousedao_academy=self.webpackChunk_powerhousedao_academy||[]).push([[3517],{7474:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var r=i(2155);const t={},s=r.createContext(t);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(s.Provider,{value:n},e.children)}},9563:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"academy/MasteryTrack/WorkWithData/drive-analytics","title":"Drive analytics","description":"Drive Analytics provides automated monitoring and insights into document drive operations within Powerhouse applications. This system tracks user interactions, document modifications, and drive activity to help developers understand usage patterns and system performance.","source":"@site/docs/academy/02-MasteryTrack/04-WorkWithData/07-drive-analytics.md","sourceDirName":"academy/02-MasteryTrack/04-WorkWithData","slug":"/academy/MasteryTrack/WorkWithData/drive-analytics","permalink":"/academy/MasteryTrack/WorkWithData/drive-analytics","draft":false,"unlisted":false,"editUrl":"https://github.com/powerhouse-inc/powerhouse-docs/tree/dev/docs/academy/02-MasteryTrack/04-WorkWithData/07-drive-analytics.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{},"sidebar":"academySidebar","previous":{"title":"Querying a document with GraphQL","permalink":"/academy/MasteryTrack/WorkWithData/Analytics Engine/GraphQL References/QueryingADocumentWithGraphQL"},"next":{"title":"Launch","permalink":"/category/launch"}}');var t=i(5723),s=i(7474);const a={},o="Drive analytics",c={},l=[{value:"Overview",id:"overview",level:2},{value:"Available Metrics in Connect",id:"available-metrics-in-connect",level:2},{value:"Drive Operations Metrics",id:"drive-operations-metrics",level:3},{value:"Document Operations Metrics",id:"document-operations-metrics",level:3},{value:"Data Sources and Structure",id:"data-sources-and-structure",level:2},{value:"Drive Analytics Sources",id:"drive-analytics-sources",level:3},{value:"Document Analytics Sources",id:"document-analytics-sources",level:3},{value:"Available Metrics",id:"available-metrics",level:2},{value:"DriveOperations",id:"driveoperations",level:3},{value:"DocumentOperations",id:"documentoperations",level:3},{value:"Complete Dimensions Reference",id:"complete-dimensions-reference",level:2},{value:"Drive Analytics Dimensions",id:"drive-analytics-dimensions",level:3},{value:"1. Drive Dimension",id:"1-drive-dimension",level:4},{value:"2. Operation Dimension",id:"2-operation-dimension",level:4},{value:"3. Target Dimension",id:"3-target-dimension",level:4},{value:"4. Action Type Dimension",id:"4-action-type-dimension",level:4},{value:"Document Analytics Dimensions",id:"document-analytics-dimensions",level:3},{value:"1. Drive Dimension",id:"1-drive-dimension-1",level:4},{value:"2. Operation Dimension",id:"2-operation-dimension-1",level:4},{value:"3. Target Dimension",id:"3-target-dimension-1",level:4},{value:"Query Parameters",id:"query-parameters",level:2},{value:"Time Range",id:"time-range",level:3},{value:"Filtering with Select",id:"filtering-with-select",level:3},{value:"Level of Detail (LOD)",id:"level-of-detail-lod",level:3},{value:"Querying Analytics Data",id:"querying-analytics-data",level:2},{value:"Using the useAnalyticsQuery Hook",id:"using-the-useanalyticsquery-hook",level:3},{value:"Using the useDriveAnalytics Hook",id:"using-the-usedriveanalytics-hook",level:3},{value:"Using the useDocumentAnalytics Hook",id:"using-the-usedocumentanalytics-hook",level:3},{value:"Advanced Query Examples",id:"advanced-query-examples",level:2},{value:"Filter by Multiple Criteria",id:"filter-by-multiple-criteria",level:3},{value:"Compare Document vs Drive Operations",id:"compare-document-vs-drive-operations",level:3},{value:"Real-time Activity Monitoring",id:"real-time-activity-monitoring",level:3},{value:"Real-time Updates",id:"real-time-updates",level:2},{value:"Configuration in Connect",id:"configuration-in-connect",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"drive-analytics",children:"Drive analytics"})}),"\n",(0,t.jsx)(n.p,{children:"Drive Analytics provides automated monitoring and insights into document drive operations within Powerhouse applications. This system tracks user interactions, document modifications, and drive activity to help developers understand usage patterns and system performance."}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The Drive Analytics system consists of two specialized processors that automatically collect metrics from document drives:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Drive Analytics Processor"}),": Tracks file and folder operations (creation, deletion, moves, etc.)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Document Analytics Processor"}),": Tracks document content changes and state modifications"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"These processors run in the background, converting operations into structured time-series data that can be queried and visualized in real-time."}),"\n",(0,t.jsx)(n.h2,{id:"available-metrics-in-connect",children:"Available Metrics in Connect"}),"\n",(0,t.jsxs)(n.p,{children:["Connect applications have Drive Analytics enabled by default through the ",(0,t.jsx)(n.code,{children:"ReactorAnalyticsProvider"}),". When enabled, the system automatically tracks:"]}),"\n",(0,t.jsx)(n.h3,{id:"drive-operations-metrics",children:"Drive Operations Metrics"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"File Creation"}),": New documents added to drives"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Folder Creation"}),": New directories created"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"File Updates"}),": Document content modifications"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Node Updates"}),": Metadata changes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"File Moves"}),": Documents relocated between folders"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"File Copies"}),": Document duplication"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"File Deletions"}),": Documents removed from drives"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"document-operations-metrics",children:"Document Operations Metrics"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"State Changes"}),": Document model state modifications"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"data-sources-and-structure",children:"Data Sources and Structure"}),"\n",(0,t.jsx)(n.p,{children:"Drive Analytics organizes data using hierarchical source paths that allow precise querying of different analytics contexts:"}),"\n",(0,t.jsx)(n.h3,{id:"drive-analytics-sources",children:"Drive Analytics Sources"}),"\n",(0,t.jsxs)(n.p,{children:["Pattern: ",(0,t.jsx)(n.code,{children:"ph/drive/{driveId}/{branch}/{scope}"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"driveId"}),": Unique identifier for the document drive"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"branch"}),': Branch name (e.g., "main", "dev")']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"scope"}),': Operation scope ("global" for shared operations, "local" for device-specific)']}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Example: ",(0,t.jsx)(n.code,{children:"ph/drive/abc123/main/global"})]}),"\n",(0,t.jsx)(n.h3,{id:"document-analytics-sources",children:"Document Analytics Sources"}),"\n",(0,t.jsxs)(n.p,{children:["Pattern: ",(0,t.jsx)(n.code,{children:"ph/doc/{driveId}/{documentId}/{branch}/{scope}"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"driveId"}),": Drive containing the document"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"documentId"}),": Specific document identifier"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"branch"}),": Branch name"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"scope"}),": Operation scope"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Example: ",(0,t.jsx)(n.code,{children:"ph/doc/abc123/doc456/main/global"})]}),"\n",(0,t.jsx)(n.h2,{id:"available-metrics",children:"Available Metrics"}),"\n",(0,t.jsx)(n.h3,{id:"driveoperations",children:"DriveOperations"}),"\n",(0,t.jsx)(n.p,{children:"Tracks file system operations within drives:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Value"}),": Always 1 (counter metric)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Count drive-level operations like file creation, deletion, moves"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Source Pattern"}),": ",(0,t.jsx)(n.code,{children:"ph/drive/*"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"documentoperations",children:"DocumentOperations"}),"\n",(0,t.jsx)(n.p,{children:"Tracks document content and state changes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Value"}),": Always 1 (counter metric)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Count document-specific operations like state changes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Source Pattern"}),": ",(0,t.jsx)(n.code,{children:"ph/doc/*"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"complete-dimensions-reference",children:"Complete Dimensions Reference"}),"\n",(0,t.jsx)(n.h3,{id:"drive-analytics-dimensions",children:"Drive Analytics Dimensions"}),"\n",(0,t.jsx)(n.h4,{id:"1-drive-dimension",children:"1. Drive Dimension"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pattern"}),": ",(0,t.jsx)(n.code,{children:"ph/drive/{driveId}/{branch}/{scope}/{revision}"}),"\n",(0,t.jsx)(n.strong,{children:"Purpose"}),": Identifies the drive context with revision information"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// Examples\n"ph/drive/abc123/main/global/42";\n"ph/drive/my-drive/feature-branch/local/15";\n'})}),"\n",(0,t.jsx)(n.h4,{id:"2-operation-dimension",children:"2. Operation Dimension"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pattern"}),": ",(0,t.jsx)(n.code,{children:"ph/drive/operation/{operationType}/{operationIndex}"}),"\n",(0,t.jsx)(n.strong,{children:"Purpose"}),": Identifies specific operation types and their sequence"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Available Operation Types"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ADD_FILE"}),": Create new file"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ADD_FOLDER"}),": Create new folder"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"UPDATE_FILE"}),": Modify file content"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"UPDATE_NODE"}),": Modify node metadata"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"MOVE_NODE"}),": Move file/folder to different location"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"COPY_NODE"}),": Duplicate existing file/folder"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DELETE_NODE"}),": Remove file/folder"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// Examples\n"ph/drive/operation/ADD_FILE/5";\n"ph/drive/operation/DELETE_NODE/23";\n"ph/drive/operation/MOVE_NODE/12";\n'})}),"\n",(0,t.jsx)(n.h4,{id:"3-target-dimension",children:"3. Target Dimension"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pattern"}),": ",(0,t.jsx)(n.code,{children:"ph/drive/target/{targetType}/{targetId}"}),"\n",(0,t.jsx)(n.strong,{children:"Purpose"}),": Identifies what was targeted by the operation"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Target Types"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DRIVE"}),": Operation affects the drive itself"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"NODE"}),": Operation affects a specific file/folder"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// Examples\n"ph/drive/target/DRIVE/abc123";\n"ph/drive/target/NODE/file456";\n"ph/drive/target/NODE/folder789";\n'})}),"\n",(0,t.jsx)(n.h4,{id:"4-action-type-dimension",children:"4. Action Type Dimension"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pattern"}),": ",(0,t.jsx)(n.code,{children:"ph/drive/actionType/{actionType}/{targetId}"}),"\n",(0,t.jsx)(n.strong,{children:"Purpose"}),": Categorizes operations by their effect"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Action Types"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"CREATED"}),": New items added (ADD_FILE, ADD_FOLDER)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DUPLICATED"}),": Items copied (COPY_NODE)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"UPDATED"}),": Existing items modified (UPDATE_FILE, UPDATE_NODE)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"MOVED"}),": Items relocated (MOVE_NODE)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"REMOVED"}),": Items deleted (DELETE_NODE)"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// Examples\n"ph/drive/actionType/CREATED/file123";\n"ph/drive/actionType/MOVED/folder456";\n"ph/drive/actionType/REMOVED/doc789";\n'})}),"\n",(0,t.jsx)(n.h3,{id:"document-analytics-dimensions",children:"Document Analytics Dimensions"}),"\n",(0,t.jsx)(n.h4,{id:"1-drive-dimension-1",children:"1. Drive Dimension"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pattern"}),": ",(0,t.jsx)(n.code,{children:"ph/doc/drive/{driveId}/{branch}/{scope}/{revision}"}),"\n",(0,t.jsx)(n.strong,{children:"Purpose"}),": Drive context for document operations"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// Examples\n"ph/doc/drive/abc123/main/global/42";\n'})}),"\n",(0,t.jsx)(n.h4,{id:"2-operation-dimension-1",children:"2. Operation Dimension"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pattern"}),": ",(0,t.jsx)(n.code,{children:"ph/doc/operation/{operationType}/{operationIndex}"}),"\n",(0,t.jsx)(n.strong,{children:"Purpose"}),": Document-specific operation identification"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// Examples (document model operations vary by document type)\n"ph/doc/operation/SET_STATE/15";\n"ph/doc/operation/ADD_ITEM/8";\n"ph/doc/operation/UPDATE_PROPERTY/22";\n'})}),"\n",(0,t.jsx)(n.h4,{id:"3-target-dimension-1",children:"3. Target Dimension"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pattern"}),": ",(0,t.jsx)(n.code,{children:"ph/doc/target/{driveId}/{targetType}/{documentId}"}),"\n",(0,t.jsx)(n.strong,{children:"Purpose"}),": Document target identification"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Target Types"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DRIVE"}),": Document is the drive document itself (driveId === documentId)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"NODE"}),": Document is a regular document within the drive"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// Examples\n"ph/doc/target/abc123/DRIVE/abc123"; // Drive document\n"ph/doc/target/abc123/NODE/doc456"; // Regular document\n'})}),"\n",(0,t.jsx)(n.h2,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,t.jsx)(n.h3,{id:"time-range",children:"Time Range"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"start"}),": DateTime object for query start time"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"end"}),": DateTime object for query end time"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"granularity"}),": Time bucketing (Total, Hourly, Daily, Weekly, Monthly)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"filtering-with-select",children:"Filtering with Select"}),"\n",(0,t.jsxs)(n.p,{children:["Use the ",(0,t.jsx)(n.code,{children:"select"})," parameter to filter by specific dimension values:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'select: {\n  // Filter by specific drives\n  drive: [\n    AnalyticsPath.fromString("ph/drive/abc123"),\n    AnalyticsPath.fromString("ph/drive/xyz789")\n  ],\n\n  // Filter by operation types\n  operation: [\n    AnalyticsPath.fromString("ph/drive/operation/ADD_FILE"),\n    AnalyticsPath.fromString("ph/drive/operation/UPDATE_FILE")\n  ],\n\n  // Filter by action types\n  actionType: [\n    AnalyticsPath.fromString("ph/drive/actionType/CREATED"),\n    AnalyticsPath.fromString("ph/drive/actionType/UPDATED")\n  ],\n\n  // Filter by targets\n  target: [\n    AnalyticsPath.fromString("ph/drive/target/NODE")\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"level-of-detail-lod",children:"Level of Detail (LOD)"}),"\n",(0,t.jsx)(n.p,{children:"Control how deeply dimensions are grouped:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"lod: {\n  drive: 1,      // Group by drive only (ignore branch/scope/revision)\n  operation: 1,  // Group by operation type only (ignore index)\n  actionType: 1, // Group by action type only (ignore target ID)\n  target: 1      // Group by target type only (ignore target ID)\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"querying-analytics-data",children:"Querying Analytics Data"}),"\n",(0,t.jsx)(n.h3,{id:"using-the-useanalyticsquery-hook",children:"Using the useAnalyticsQuery Hook"}),"\n",(0,t.jsxs)(n.p,{children:["The primary way to access drive analytics is through the ",(0,t.jsx)(n.code,{children:"useAnalyticsQuery"})," hook:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'import {\n  useAnalyticsQuery,\n  AnalyticsGranularity,\n  AnalyticsPath,\n  DateTime,\n} from "@powerhousedao/reactor-browser/analytics";\n\nfunction DriveUsageChart({ driveId }: { driveId: string }) {\n  const { data, isLoading } = useAnalyticsQuery({\n    start: DateTime.now().minus({ days: 7 }),\n    end: DateTime.now(),\n    granularity: AnalyticsGranularity.Daily,\n    metrics: ["DriveOperations"],\n    select: {\n      drive: [AnalyticsPath.fromString(`ph/drive/${driveId}`)],\n      actionType: [\n        AnalyticsPath.fromString("ph/drive/actionType/CREATED"),\n        AnalyticsPath.fromString("ph/drive/actionType/UPDATED"),\n        AnalyticsPath.fromString("ph/drive/actionType/REMOVED"),\n      ],\n    },\n    lod: {\n      drive: 1,\n      actionType: 1,\n    },\n  });\n\n  if (isLoading) return <div>Loading analytics...</div>;\n\n  return (\n    <div>\n      {/* Render your chart using the analytics data */}\n      {data?.rows.map((row) => (\n        <div key={row.metric}>\n          {row.metric}: {row.value}\n        </div>\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"using-the-usedriveanalytics-hook",children:"Using the useDriveAnalytics Hook"}),"\n",(0,t.jsxs)(n.p,{children:["For common drive analytics queries, use the specialized ",(0,t.jsx)(n.code,{children:"useDriveAnalytics"})," hook:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'import { useDriveAnalytics } from "@powerhousedao/common/drive-analytics";\nimport { AnalyticsGranularity } from "@powerhousedao/reactor-browser/analytics";\n\nfunction DriveInsights({ driveIds }: { driveIds: string[] }) {\n  const analytics = useDriveAnalytics({\n    filters: {\n      driveId: driveIds,\n      operation: ["ADD_FILE", "UPDATE_FILE", "DELETE_NODE"],\n      actionType: ["CREATED", "UPDATED", "REMOVED"],\n    },\n    from: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(), // 7 days ago\n    to: new Date().toISOString(),\n    granularity: AnalyticsGranularity.Daily,\n    levelOfDetail: { drive: 1, operation: 1 },\n  });\n\n  if (analytics.isLoading) return <div>Loading...</div>;\n\n  return (\n    <div>\n      <h3>Drive Activity Summary</h3>\n      {analytics.data?.rows.map((row, index) => (\n        <div key={index}>\n          <strong>\n            {row.dimensions.find((d) => d.name === "actionType")?.path}\n          </strong>\n          : {row.value}\n        </div>\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"using-the-usedocumentanalytics-hook",children:"Using the useDocumentAnalytics Hook"}),"\n",(0,t.jsxs)(n.p,{children:["For document-specific analytics queries, use the ",(0,t.jsx)(n.code,{children:"useDocumentAnalytics"})," hook:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'import { useDocumentAnalytics } from "@powerhousedao/common/drive-analytics";\nimport { AnalyticsGranularity } from "@powerhousedao/reactor-browser/analytics";\n\nfunction DocumentInsights({\n  driveId,\n  documentIds,\n}: {\n  driveId: string;\n  documentIds: string[];\n}) {\n  const analytics = useDocumentAnalytics({\n    filters: {\n      driveId: [driveId],\n      documentId: documentIds,\n      target: ["NODE"], // Focus on document nodes vs drive documents\n      branch: ["main"],\n      scope: ["global"],\n    },\n    from: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(), // 24 hours ago\n    to: new Date().toISOString(),\n    granularity: AnalyticsGranularity.Hourly,\n    levelOfDetail: {\n      drive: 1,\n      operation: 1,\n      target: 1,\n    },\n  });\n\n  if (analytics.isLoading) return <div>Loading...</div>;\n\n  return (\n    <div>\n      <h3>Document Activity Summary</h3>\n      {analytics.data?.rows.map((row, index) => (\n        <div key={index}>Document Operations: {row.value}</div>\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"advanced-query-examples",children:"Advanced Query Examples"}),"\n",(0,t.jsx)(n.h3,{id:"filter-by-multiple-criteria",children:"Filter by Multiple Criteria"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// Get file creations and updates for specific drives in the last 24 hours\nconst { data } = useAnalyticsQuery({\n  start: DateTime.now().minus({ hours: 24 }),\n  end: DateTime.now(),\n  granularity: AnalyticsGranularity.Hourly,\n  metrics: ["DriveOperations"],\n  select: {\n    drive: [\n      AnalyticsPath.fromString("ph/drive/project-a"),\n      AnalyticsPath.fromString("ph/drive/project-b"),\n    ],\n    operation: [\n      AnalyticsPath.fromString("ph/drive/operation/ADD_FILE"),\n      AnalyticsPath.fromString("ph/drive/operation/UPDATE_FILE"),\n    ],\n    target: [AnalyticsPath.fromString("ph/drive/target/NODE")],\n  },\n  lod: {\n    drive: 1,\n    operation: 1,\n  },\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"compare-document-vs-drive-operations",children:"Compare Document vs Drive Operations"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// Using the specialized hooks for easier comparison\nconst driveOps = useDriveAnalytics({\n  filters: { driveId: [driveId] },\n  from: DateTime.now().minus({ days: 1 }).toISO(),\n  to: DateTime.now().toISO(),\n  granularity: AnalyticsGranularity.Total,\n});\n\nconst docOps = useDocumentAnalytics({\n  filters: { driveId: [driveId] },\n  from: DateTime.now().minus({ days: 1 }).toISO(),\n  to: DateTime.now().toISO(),\n  granularity: AnalyticsGranularity.Total,\n});\n\n// Or using useAnalyticsQuery directly\nconst driveOpsQuery = useAnalyticsQuery({\n  start: DateTime.now().minus({ days: 1 }),\n  end: DateTime.now(),\n  granularity: AnalyticsGranularity.Total,\n  metrics: ["DriveOperations"],\n  select: {\n    drive: [AnalyticsPath.fromString(`ph/drive/${driveId}`)],\n  },\n});\n\nconst docOpsQuery = useAnalyticsQuery({\n  start: DateTime.now().minus({ days: 1 }),\n  end: DateTime.now(),\n  granularity: AnalyticsGranularity.Total,\n  metrics: ["DocumentOperations"],\n  select: {\n    drive: [AnalyticsPath.fromString(`ph/doc/drive/${driveId}`)],\n  },\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"real-time-activity-monitoring",children:"Real-time Activity Monitoring"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// Monitor specific drive for real-time updates\nconst { data } = useAnalyticsQuery(\n  {\n    start: DateTime.now().minus({ minutes: 10 }),\n    end: DateTime.now(),\n    granularity: AnalyticsGranularity.Total,\n    metrics: ["DriveOperations"],\n    select: {\n      drive: [AnalyticsPath.fromString(`ph/drive/${driveId}`)],\n    },\n  },\n  {\n    sources: [AnalyticsPath.fromString(`ph/drive/${driveId}`)],\n    refetchInterval: 5000, // Poll every 5 seconds\n  },\n);\n'})}),"\n",(0,t.jsx)(n.h2,{id:"real-time-updates",children:"Real-time Updates"}),"\n",(0,t.jsx)(n.p,{children:"Analytics queries can automatically update when new data is available by specifying sources:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'const { data } = useAnalyticsQuery(\n  {\n    start: DateTime.now().minus({ hours: 1 }),\n    end: DateTime.now(),\n    granularity: AnalyticsGranularity.Total,\n    metrics: ["DriveOperations"],\n  },\n  {\n    sources: [AnalyticsPath.fromString(`ph/drive/${driveId}`)],\n  },\n);\n\n// This query will automatically refetch when new operations occur in the specified drive\n'})}),"\n",(0,t.jsx)(n.h2,{id:"configuration-in-connect",children:"Configuration in Connect"}),"\n",(0,t.jsx)(n.p,{children:"Drive Analytics is automatically enabled in Connect applications through feature flags:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// In apps/connect/src/context/reactor-analytics.tsx\nexport function ReactorAnalyticsProvider({ children }: PropsWithChildren) {\n  return (\n    <AnalyticsProvider options={{ databaseName: "connect:analytics" }}>\n      {connectConfig.analytics.driveAnalyticsEnabled && (\n        <DriveAnalyticsProcessor />\n      )}\n      {children}\n    </AnalyticsProvider>\n  );\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);