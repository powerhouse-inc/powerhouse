"use strict";(self.webpackChunk_powerhousedao_academy=self.webpackChunk_powerhousedao_academy||[]).push([[9662],{5265:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"academy/APIReferences/renown-sdk/Authentication","title":"Authentication Guide","description":"Comprehensive guide to implementing authentication with the Renown SDK.","source":"@site/docs/academy/04-APIReferences/renown-sdk/01-Authentication.md","sourceDirName":"academy/04-APIReferences/renown-sdk","slug":"/academy/APIReferences/renown-sdk/Authentication","permalink":"/academy/APIReferences/renown-sdk/Authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/powerhouse-inc/powerhouse-docs/tree/dev/docs/academy/04-APIReferences/renown-sdk/01-Authentication.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{}}');var i=s(5723),o=s(7474);const r={},a="Authentication Guide",l={},d=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Overview",id:"overview",level:2},{value:"Authentication Flow",id:"authentication-flow",level:2},{value:"1. Initial Load",id:"1-initial-load",level:3},{value:"2. Login Flow",id:"2-login-flow",level:3},{value:"3. Session Restoration",id:"3-session-restoration",level:3},{value:"Setup",id:"setup",level:2},{value:"Step 1: Wrap Your App with UserProvider",id:"step-1-wrap-your-app-with-userprovider",level:3},{value:"Optional: Customize Configuration",id:"optional-customize-configuration",level:3},{value:"Optional: Add Loading/Error Screens",id:"optional-add-loadingerror-screens",level:3},{value:"Implementation",id:"implementation",level:2},{value:"Using the RenownAuthButton Component",id:"using-the-renownauthbutton-component",level:3},{value:"Custom Login Component with useUser Hook",id:"custom-login-component-with-useuser-hook",level:3},{value:"Protected Route Component",id:"protected-route-component",level:3},{value:"User Profile Display",id:"user-profile-display",level:3},{value:"Advanced Patterns",id:"advanced-patterns",level:2},{value:"Conditional Navigation Based on Auth",id:"conditional-navigation-based-on-auth",level:3},{value:"Auth State Listener",id:"auth-state-listener",level:3},{value:"Custom Auth Hook with Additional Logic",id:"custom-auth-hook-with-additional-logic",level:3},{value:"Role-Based Access Control",id:"role-based-access-control",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"1. Token Storage",id:"1-token-storage",level:3},{value:"2. DID Validation",id:"2-did-validation",level:3},{value:"3. Secure Communication",id:"3-secure-communication",level:3},{value:"4. Session Timeout",id:"4-session-timeout",level:3},{value:"5. Server-Side Verification",id:"5-server-side-verification",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Handle Loading States",id:"1-handle-loading-states",level:3},{value:"2. Graceful Degradation",id:"2-graceful-degradation",level:3},{value:"3. Cleanup on Unmount",id:"3-cleanup-on-unmount",level:3},{value:"4. Error Boundaries",id:"4-error-boundaries",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue: Auth state not updating",id:"issue-auth-state-not-updating",level:3},{value:"Issue: Session not persisting",id:"issue-session-not-persisting",level:3},{value:"Issue: Multiple login popups",id:"issue-multiple-login-popups",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"authentication-guide",children:"Authentication Guide"})}),"\n",(0,i.jsx)(n.p,{children:"Comprehensive guide to implementing authentication with the Renown SDK."}),"\n",(0,i.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#overview",children:"Overview"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#authentication-flow",children:"Authentication Flow"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#setup",children:"Setup"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#implementation",children:"Implementation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#advanced-patterns",children:"Advanced Patterns"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#security-considerations",children:"Security Considerations"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"The Renown SDK provides a complete authentication system that:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Auto-initializes"})," the Renown SDK and ConnectCrypto (zero configuration!)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Manages"})," user sessions across page reloads"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handles"})," authentication redirects from Renown portal"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fetches"})," user profile data automatically"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Provides"})," React hooks, components, and context for easy integration"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"authentication-flow",children:"Authentication Flow"}),"\n",(0,i.jsx)(n.h3,{id:"1-initial-load",children:"1. Initial Load"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"User visits app\n    \u2193\nUserProvider initializes\n    \u2193\nCheck sessionStorage for existing session\n    \u2193\n\u251c\u2500 Session found \u2192 Restore user \u2192 Authorized\n\u2514\u2500 No session \u2192 Check URL params \u2192 Initialize SDK \u2192 Not Authorized\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-login-flow",children:"2. Login Flow"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'User clicks "Login"\n    \u2193\nopenRenown() called\n    \u2193\nRedirect to Renown Portal\n    \u2193\nUser authenticates\n    \u2193\nRedirect back to app with DID\n    \u2193\nhandleRenownReturn() processes\n    \u2193\nlogin() called\n    \u2193\nFetch user profile\n    \u2193\nStore in sessionStorage\n    \u2193\nUpdate auth state \u2192 Authorized\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-session-restoration",children:"3. Session Restoration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"User refreshes page\n    \u2193\nUserProvider checks sessionStorage\n    \u2193\nValid session found\n    \u2193\nFetch latest profile data\n    \u2193\nRestore auth state \u2192 Authorized\n"})}),"\n",(0,i.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-wrap-your-app-with-userprovider",children:"Step 1: Wrap Your App with UserProvider"}),"\n",(0,i.jsx)(n.p,{children:"The UserProvider automatically initializes the Renown SDK - no manual setup required!"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// app/layout.tsx (Next.js App Router)\nimport { UserProvider } from '@renown/sdk'\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html lang=\"en\">\n      <body>\n        <UserProvider>\n          {children}\n        </UserProvider>\n      </body>\n    </html>\n  )\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"That's it! The SDK is now initialized and ready to use."}),"\n",(0,i.jsx)(n.h3,{id:"optional-customize-configuration",children:"Optional: Customize Configuration"}),"\n",(0,i.jsx)(n.p,{children:"You can customize the Renown URL, network, and chain:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'<UserProvider\n  renownUrl={process.env.NEXT_PUBLIC_RENOWN_URL || \'https://www.renown.id\'}\n  networkId="eip155"\n  chainId="1"\n>\n  {children}\n</UserProvider>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"optional-add-loadingerror-screens",children:"Optional: Add Loading/Error Screens"}),"\n",(0,i.jsx)(n.p,{children:"Provide custom UI for initialization states:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'<UserProvider\n  loadingComponent={\n    <div className="loading-screen">\n      <Spinner />\n      <p>Initializing authentication...</p>\n    </div>\n  }\n  errorComponent={(error, retry) => (\n    <div className="error-screen">\n      <h2>Authentication Failed</h2>\n      <p>{error.message}</p>\n      <button onClick={retry}>Try Again</button>\n    </div>\n  )}\n>\n  {children}\n</UserProvider>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"implementation",children:"Implementation"}),"\n",(0,i.jsx)(n.h3,{id:"using-the-renownauthbutton-component",children:"Using the RenownAuthButton Component"}),"\n",(0,i.jsxs)(n.p,{children:["The simplest way to add authentication is to use the built-in ",(0,i.jsx)(n.code,{children:"RenownAuthButton"})," component:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"'use client'\n\nimport { RenownAuthButton } from '@renown/sdk'\n\nexport function Header() {\n  return (\n    <header>\n      <h1>My App</h1>\n      <RenownAuthButton showLogoutButton showUsername />\n    </header>\n  )\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"custom-login-component-with-useuser-hook",children:"Custom Login Component with useUser Hook"}),"\n",(0,i.jsxs)(n.p,{children:["For full control, build your own component using the ",(0,i.jsx)(n.code,{children:"useUser"})," hook:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"'use client'\n\nimport { useUser } from '@renown/sdk'\n\nexport function CustomRenownAuthButton() {\n  const { user, loginStatus, isLoading, openRenown, logout } = useUser()\n\n  if (isLoading) {\n    return (\n      <button disabled>\n        <Spinner />\n        Loading...\n      </button>\n    )\n  }\n\n  if (loginStatus === 'authorized' && user) {\n    return (\n      <div className=\"flex items-center gap-2\">\n        {user.avatar && (\n          <img\n            src={user.avatar}\n            alt={user.name || 'User'}\n            className=\"w-8 h-8 rounded-full\"\n          />\n        )}\n        <span>{user.name || user.did.slice(0, 15)}...</span>\n        <button onClick={logout}>Logout</button>\n      </div>\n    )\n  }\n\n  return (\n    <button onClick={openRenown}>\n      Login with Renown\n    </button>\n  )\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"protected-route-component",children:"Protected Route Component"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"'use client'\n\nimport { useUser } from '@renown/sdk'\nimport { useRouter } from 'next/navigation'\nimport { useEffect } from 'react'\n\nexport function ProtectedRoute({ children }: { children: React.ReactNode }) {\n  const { user, loginStatus, isLoading, openRenown } = useUser()\n  const router = useRouter()\n\n  useEffect(() => {\n    if (!isLoading && loginStatus !== 'authorized') {\n      // Redirect to login or show login prompt\n      router.push('/login')\n    }\n  }, [isLoading, loginStatus, router])\n\n  if (isLoading) {\n    return <div>Loading...</div>\n  }\n\n  if (loginStatus !== 'authorized' || !user) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-screen\">\n        <h1>Authentication Required</h1>\n        <p>Please log in to access this page</p>\n        <button onClick={openRenown}>Login</button>\n      </div>\n    )\n  }\n\n  return <>{children}</>\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"user-profile-display",children:"User Profile Display"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"'use client'\n\nimport { useUser } from '@renown/sdk'\n\nexport function UserProfile() {\n  const { user, logout } = useUser()\n\n  if (!user) return null\n\n  return (\n    <div className=\"profile-card\">\n      <header>\n        {user.avatar && (\n          <img\n            src={user.avatar}\n            alt={user.name || 'User avatar'}\n            className=\"avatar\"\n          />\n        )}\n        <h2>{user.name || 'Anonymous User'}</h2>\n      </header>\n\n      <dl className=\"profile-details\">\n        <dt>DID</dt>\n        <dd>{user.did}</dd>\n\n        {user.ethAddress && (\n          <>\n            <dt>Ethereum Address</dt>\n            <dd>{user.ethAddress}</dd>\n          </>\n        )}\n\n        {user.email && (\n          <>\n            <dt>Email</dt>\n            <dd>{user.email}</dd>\n          </>\n        )}\n      </dl>\n\n      <button onClick={logout}>Logout</button>\n    </div>\n  )\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"advanced-patterns",children:"Advanced Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"conditional-navigation-based-on-auth",children:"Conditional Navigation Based on Auth"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'\'use client\'\n\nimport { useUser } from \'@renown/sdk\'\nimport Link from \'next/link\'\n\nexport function Navigation() {\n  const { user, loginStatus } = useUser()\n\n  const isAuthorized = loginStatus === \'authorized\'\n\n  return (\n    <nav>\n      <Link href="/">Home</Link>\n\n      {isAuthorized ? (\n        <>\n          <Link href="/dashboard">Dashboard</Link>\n          <Link href="/profile">Profile</Link>\n          <Link href="/settings">Settings</Link>\n        </>\n      ) : (\n        <>\n          <Link href="/about">About</Link>\n          <Link href="/pricing">Pricing</Link>\n        </>\n      )}\n    </nav>\n  )\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"auth-state-listener",children:"Auth State Listener"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"'use client'\n\nimport { useUser } from '@renown/sdk'\nimport { useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { toast } from 'react-hot-toast'\n\nexport function AuthStateListener() {\n  const { user, loginStatus } = useUser()\n  const router = useRouter()\n\n  useEffect(() => {\n    if (loginStatus === 'authorized' && user) {\n      // User just logged in\n      toast.success(`Welcome back, ${user.name || 'User'}!`)\n\n      // Track analytics\n      analytics.identify(user.did, {\n        name: user.name,\n        ethAddress: user.ethAddress,\n      })\n\n      // Redirect to dashboard\n      router.push('/dashboard')\n    }\n  }, [loginStatus, user, router])\n\n  useEffect(() => {\n    if (loginStatus === 'not-authorized') {\n      // User logged out\n      toast.info('You have been logged out')\n\n      // Clear analytics\n      analytics.reset()\n\n      // Redirect to home\n      router.push('/')\n    }\n  }, [loginStatus, router])\n\n  return null // This is a listener component\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"custom-auth-hook-with-additional-logic",children:"Custom Auth Hook with Additional Logic"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"'use client'\n\nimport { useUser as useRenownAuth } from '@renown/sdk'\nimport { useEffect, useState } from 'react'\n\ninterface ExtendedAuthState {\n  user: User | null\n  isAuthenticated: boolean\n  isLoading: boolean\n  hasCompletedProfile: boolean\n  login: () => void\n  logout: () => Promise<void>\n}\n\nexport function useUser(): ExtendedAuthState {\n  const auth = useRenownAuth()\n  const [hasCompletedProfile, setHasCompletedProfile] = useState(false)\n\n  useEffect(() => {\n    if (auth.user) {\n      // Check if user has completed their profile\n      const isComplete = !!(\n        auth.user.name &&\n        auth.user.avatar &&\n        auth.user.email\n      )\n      setHasCompletedProfile(isComplete)\n    } else {\n      setHasCompletedProfile(false)\n    }\n  }, [auth.user])\n\n  return {\n    user: auth.user,\n    isAuthenticated: auth.loginStatus === 'authorized',\n    isLoading: auth.isLoading,\n    hasCompletedProfile,\n    login: auth.openRenown,\n    logout: auth.logout,\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"role-based-access-control",children:"Role-Based Access Control"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"'use client'\n\nimport { useUser } from '@renown/sdk'\nimport { ReactNode } from 'react'\n\ninterface RBACProps {\n  children: ReactNode\n  allowedRoles?: string[]\n  fallback?: ReactNode\n}\n\nexport function RoleBasedAccess({\n  children,\n  allowedRoles = [],\n  fallback = <div>Access Denied</div>\n}: RBACProps) {\n  const { user, loginStatus } = useUser()\n\n  if (loginStatus !== 'authorized' || !user) {\n    return fallback\n  }\n\n  // Check user roles (you'd fetch this from your backend)\n  const userRoles = getUserRoles(user.did) // Implement this\n\n  const hasAccess = allowedRoles.length === 0 ||\n    allowedRoles.some(role => userRoles.includes(role))\n\n  return hasAccess ? <>{children}</> : fallback\n}\n\n// Usage\nfunction AdminPanel() {\n  return (\n    <RoleBasedAccess allowedRoles={['admin', 'moderator']}>\n      <h1>Admin Panel</h1>\n      {/* Admin content */}\n    </RoleBasedAccess>\n  )\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,i.jsx)(n.h3,{id:"1-token-storage",children:"1. Token Storage"}),"\n",(0,i.jsxs)(n.p,{children:["The SDK stores session data in ",(0,i.jsx)(n.code,{children:"sessionStorage"})," (not ",(0,i.jsx)(n.code,{children:"localStorage"}),") for security:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Session data clears when tab closes"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Not accessible across tabs"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Not persisted across browser sessions"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Protected from XSS via httpOnly (for API tokens)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2-did-validation",children:"2. DID Validation"}),"\n",(0,i.jsx)(n.p,{children:"Always validate DIDs before processing:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"function isValidDID(did: string): boolean {\n  // Must start with did:pkh:\n  if (!did.startsWith('did:pkh:')) return false\n\n  // Must have correct number of parts\n  const parts = did.split(':')\n  if (parts.length !== 5) return false\n\n  // Validate ethereum address format\n  const address = parts[4]\n  if (!address.match(/^0x[a-fA-F0-9]{40}$/)) return false\n\n  return true\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-secure-communication",children:"3. Secure Communication"}),"\n",(0,i.jsx)(n.p,{children:"Always use HTTPS for Renown URLs:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const RENOWN_URL = process.env.NEXT_PUBLIC_RENOWN_URL\n\nif (RENOWN_URL && !RENOWN_URL.startsWith('https://')) {\n  console.warn('WARNING: Renown URL should use HTTPS')\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-session-timeout",children:"4. Session Timeout"}),"\n",(0,i.jsx)(n.p,{children:"Implement session timeout for security:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const SESSION_TIMEOUT = 24 * 60 * 60 * 1000 // 24 hours\n\nfunction isSessionValid(timestamp: number): boolean {\n  const now = Date.now()\n  const age = now - timestamp\n  return age < SESSION_TIMEOUT\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-server-side-verification",children:"5. Server-Side Verification"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Never trust client-side auth alone"}),". Always verify on the server:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Server-side API route\nexport async function GET(request: Request) {\n  const authHeader = request.headers.get('authorization')\n\n  if (!authHeader) {\n    return new Response('Unauthorized', { status: 401 })\n  }\n\n  // Verify the JWT/credential with Renown\n  const isValid = await verifyRenownCredential(authHeader)\n\n  if (!isValid) {\n    return new Response('Invalid credentials', { status: 403 })\n  }\n\n  // Proceed with authorized request\n  return Response.json({ data: 'Protected data' })\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"1-handle-loading-states",children:"1. Handle Loading States"}),"\n",(0,i.jsx)(n.p,{children:"Always handle loading states to provide good UX:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"function MyComponent() {\n  const { user, isLoading, loginStatus } = useUser()\n\n  if (isLoading) {\n    return <Skeleton /> // Show skeleton/spinner\n  }\n\n  // Now safe to use user/loginStatus\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-graceful-degradation",children:"2. Graceful Degradation"}),"\n",(0,i.jsx)(n.p,{children:"Provide fallbacks for unauthenticated users:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"function FeatureSection() {\n  const { user } = useUser()\n\n  return (\n    <section>\n      {user ? (\n        <PersonalizedContent user={user} />\n      ) : (\n        <GenericContent />\n      )}\n    </section>\n  )\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-cleanup-on-unmount",children:"3. Cleanup on Unmount"}),"\n",(0,i.jsx)(n.p,{children:"Clean up subscriptions and listeners:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"useEffect(() => {\n  const handleAuthChange = () => {\n    // Handle auth changes\n  }\n\n  // Subscribe to auth events\n  const unsubscribe = subscribeToAuthEvents(handleAuthChange)\n\n  return () => {\n    unsubscribe() // Cleanup\n  }\n}, [])\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-error-boundaries",children:"4. Error Boundaries"}),"\n",(0,i.jsx)(n.p,{children:"Wrap auth components in error boundaries:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"<ErrorBoundary fallback={<AuthError />}>\n  <UserProvider>\n    <App />\n  </UserProvider>\n</ErrorBoundary>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"issue-auth-state-not-updating",children:"Issue: Auth state not updating"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause:"})," Component not re-rendering when auth changes"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution:"})," Ensure you're using ",(0,i.jsx)(n.code,{children:"useUser()"})," hook, not accessing ",(0,i.jsx)(n.code,{children:"window.renown"})," directly"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// \u274c Wrong\nconst user = window.renown?.user\n\n// \u2705 Correct\nconst { user } = useUser()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"issue-session-not-persisting",children:"Issue: Session not persisting"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause:"})," SessionStorage might be disabled or cleared"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution:"})," Check browser settings and handle gracefully"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"try {\n  SessionStorageManager.setUserData(data)\n} catch (error) {\n  console.warn('SessionStorage not available:', error)\n  // Fallback to in-memory storage\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"issue-multiple-login-popups",children:"Issue: Multiple login popups"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause:"})," ",(0,i.jsx)(n.code,{children:"openRenown()"})," called multiple times"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution:"})," Debounce the login button"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const handleLogin = useCallback(\n  debounce(() => {\n    openRenown()\n  }, 1000),\n  [openRenown]\n)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Read the ",(0,i.jsx)(n.a,{href:"./API_REFERENCE.md",children:"API Reference"})," for detailed documentation"]}),"\n",(0,i.jsxs)(n.li,{children:["See ",(0,i.jsx)(n.a,{href:"../examples/",children:"Examples"})," for complete implementations"]}),"\n",(0,i.jsxs)(n.li,{children:["Check ",(0,i.jsx)(n.a,{href:"./MIGRATION.md",children:"Migration Guide"})," if upgrading from older versions"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},7474:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var t=s(2155);const i={},o=t.createContext(i);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);